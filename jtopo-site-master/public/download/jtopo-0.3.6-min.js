(function(e){JTopo={version:"0.3.6"},e.JTopo=JTopo})(window),function(e){function t(e){function n(e,n){var r=[],i=0;for(var s=0;s<e.length;s++){var o=e[s],u=t.messageMap[o];u==null&&(t.messageMap[o]=[]);function a(t){return r[s]=t,i++,i==e.length?(i=0,n.apply(null,r)):null}t.messageMap[o].push(a),t.messageCount++}}var t=this;this.name=e,this.messageMap={},this.messageCount=0,this.subscribe=function(e,r){if(!typeof e=="string")n(e,r);else{var i=t.messageMap[e];i==null&&(t.messageMap[e]=[]),t.messageMap[e].push(r),t.messageCount++}},this.unsubscribe=function(e){var n=t.messageMap[e];n!=null&&(t.messageMap[e]=null,delete t.messageMap[e],t.messageCount--)},this.publish=function(e,n,r){var i=t.messageMap[e];if(i!=null)for(var s=0;s<i.length;s++)r?function(e,t){setTimeout(function(){e(t)},10)}(i[s],n):i[s](n)}}function n(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}function r(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.body.scrollLeft-document.body.clientLeft,y:e.clientY+document.body.scrollTop-document.body.clientTop}}function i(e){e=e||r(window.event);var t=document.body.scrollLeft+(e.x||e.layerX),n=document.body.scrollTop+(e.y||e.layerY);return{x:t,y:n}}function s(e,t,n,r,i){var s=n-e,o=r-t,u=Math.sqrt(s*s+o*o),a=Math.atan2(o,s)+i;return{x:e+Math.cos(a)*u,y:t+Math.sin(a)*u}}function o(e,t,n){var r=[];for(var i=0;i<t.length;i++){var o=s(e.x,e.y,t[i].x,t[i].y,n);r.push(o)}return r}function u(e,t,n){function i(r){if(r==e.length)return;t(e[r]),setTimeout(function(){i(++r)},n)}if(e.length==0)return;var r=0;i(r)}function a(e,t,n,r){function s(e){if(e==t)return;n(t),setTimeout(function(){s(++e)},r)}if(t<e)return;var i=0;s(i)}function f(e){var t={};for(var n in e)t[n]=e[n];return t}function l(e,t){var n=t.x,r=t.y,i=t.width,s=t.height;return e.x>n&&e.x<n+i&&e.y>r&&e.y<r+s}function c(t,n,r){var i=e.util.getDistance(n,r),s=e.util.getDistance(n,t),o=e.util.getDistance(r,t),u=Math.abs(s+o-i)<=3;return u}Array.prototype.del=function(e){if(typeof e!="number"){for(var t=0;t<this.length;t++)if(this[t]===e)return this.slice(0,t).concat(this.slice(t+1,this.length));return this}return e<0?this:this.slice(0,e).concat(this.slice(e+1,this.length))},[].indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),window.console||(window.console={log:function(e){},info:function(e){},debug:function(e){},warn:function(e){},error:function(e){}}),e.util={rotatePoint:s,rotatePoints:o,getDistance:n,getXY:i,mouseCoords:r,MessageBus:t,isIE:!+[1],clone:f,isPointInRect:l,isPointInLine:c},window.$for=a,window.$foreach=u}(JTopo),function(e){function t(t){function r(t){var r=e.util.getXY(t);return{x:r.x-n.offsetX,y:r.y-n.offsetY}}function i(t){var i=r(t);return e.util.isIE?{x:i.x-n.translateX,y:i.y-n.translateY,scene:n.currentScene}:{x:i.x-n.translateX,y:i.y-n.translateY,button:t.button,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,pageX:t.pageX,pageY:t.pageY,scene:n.currentScene}}function o(e){s=!0,document.onselectstart=function(){return!0}}function u(e){s=!1,document.onselectstart=function(){return!1}}function a(e){n.hasAnimate||(n.repaintSwitch=!0);var t=i(e);n.dispatchEvent("mousedown",t),n.isOnMouseDown=!0,n.mouseDownX=t.x,n.mouseDownY=t.y,(n.mode=="select"||n.mode=="edit")&&n.currentScene&&n.currentScene.mousedownHander(t)}function f(e){var t=i(e);n.dispatchEvent("mouseup",t),n.isOnMouseDown=!1,(n.mode=="select"||n.mode=="edit")&&n.currentScene&&n.currentScene.mouseupHander(t),n.hasAnimate||(n.repaintSwitch=!1)}function l(e){if(n.isOnMouseDown&&n.mode=="drag"){var s=r(e);n.translateX=s.x-n.mouseDownX,n.translateY=s.y-n.mouseDownY}n.mode=="drag"?t.style.cursor="pointer":n.mode=="select"?t.style.cursor="default":n.mode=="edit"&&(t.style.cursor="default");var o=i(e);n.dispatchEvent("mousemove",o),(n.mode=="select"||n.mode=="edit")&&n.currentScene&&n.currentScene.mousemoveHander(o)}function c(e){var t=i(e);n.dispatchEvent("click",t),(n.mode=="select"||n.mode=="edit")&&n.currentScene&&n.currentScene.clickHander(t)}function h(e){var t=i(e);n.dispatchEvent("dbclick",t),(n.mode=="select"||n.mode=="edit")&&n.currentScene&&n.currentScene.dbclickHander(t)}var n=this;e.stage=n,this.initialize=function(){this.scenes=[],this.width=0,this.height=0,this.frames=24,this.messageBus=new e.util.MessageBus,this.currentScene=null,this.canvas=t,this.width=t.width,this.height=t.height,this.graphics=t.getContext("2d"),this.offsetX=t.offsetLeft,this.offsetY=t.offsetTop,this.mode="select",this.translateX=0,this.translateY=0,this.mouseDownX=0,this.mouseDownY=0,this.isOnMouseDown=!1,this.controlRect={width:10,height:10},this.hasAnimate=!0,this.repaintSwitch=!1},this.initialize();var s=!0;document.oncontextmenu=function(e){return s},e.util.isIE?(t.onmouseout=o,t.onmouseover=u,t.onmousedown=a,t.onmouseup=f,t.onmousemove=l,t.onclick=c,t.ondblclick=h):(t.addEventListener("mouseout",o),t.addEventListener("mouseover",u),t.addEventListener("mousedown",a),t.addEventListener("mouseup",f),t.addEventListener("mousemove",l),t.addEventListener("click",c),t.addEventListener("dblclick",h)),e.util.isIE||(window.addEventListener("keydown",function(e){n.dispatchEvent("keydown",e),n.currentScene&&n.currentScene.keydownHander(e)},!0),window.addEventListener("keyup",function(e){n.dispatchEvent("keyup",e),n.currentScene&&n.currentScene.keyupHander(e)},!0)),this.play=function(e){return this.currentScene&&this.currentScene.hide(),this.currentScene=e,e.show(),this},this.add=function(e){e.initialize(this),this.play(e)},this.remove=function(e){for(var t=0;t<this.scenes.length;t++)if(this.scenes[t]===e)return this.scenes=this.scenes.del(t),this},this.clear=function(e){this.scenes=[],this.currentScene=null},this.addEventListener=function(e,t){return this.messageBus.subscribe(e,t),this},this.removeEventListener=function(e){this.messageBus.unsubscribe(e)},this.dispatchEvent=function(e,t){return this.messageBus.publish(e,t),this},this.saveImageInfo=function(){var e=this.canvas.toDataURL("image/png"),t=window.open("about:blank","image from canvas");return t.document.write("<img src='"+e+"' alt='from canvas'/>"),this},this.saveAsLocalImage=function(){var e=this.canvas.toDataURL("image/png").replace("image/png","image/octet-stream");return window.location.href=e,this},this.repaint=function(){return n.currentScene&&(this.graphics.save(),this.graphics.translate(this.translateX,this.translateY),n.currentScene.repaint(),this.graphics.restore()),this},function(){n.hasAnimate==0&&n.repaintSwitch==0||n.frames<=0?setTimeout(arguments.callee,100):(n.repaint(),setTimeout(arguments.callee,1e3/n.frames))}(),setTimeout(function(){n.repaint()},500)}e.Stage=t}(JTopo),function(e){function t(t){function n(t,r){if(t instanceof e.Link)return n(t.nodeA,r)||n(t.nodeZ,r);var i=t.x+r.translateX,s=t.y+r.translateY,o=s+t.height,u=i+t.width;return i>r.width||s>r.height||u<0||o<0?!1:!0}this.messageBus=new e.util.MessageBus,this.initialize=function(e){this.visible=!1,this.rotate=0,this.alpha=1,this.scaleX=1,this.scaleY=1,this.elements=[],this.elementMap={},this.background=null,this.style={fillStyle:"238,238,238"},this.shadow=!0,this.operations=[],this.stage=e,this.stage.scenes.push(this),this.width=e.width,this.height=e.height,this.graphics=e.graphics},this.show=function(){this.visible=!0,this.paint()},this.hide=function(){this.visible=!1},this.clear=function(){this.elements=[],this.elementMap=[],this.operations=[]},this.paintElements=function(e){var t=this.graphics;for(var r=0;r<e.length;r++){var i=e[r];if(i.visible!=1)continue;if(!n(i,this.stage))continue;t.save(),i.shadow==0&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0);if(i.translate){var s=i.scalaX||1,o=i.scalaY||1;t.translate(i.x+i.width*s/2,i.y+i.height*o/2),i.rotate&&t.rotate(i.rotate),i.scalaX&&i.scalaY?t.scale(i.scalaX,i.scalaY):i.scalaX?t.scale(i.scalaX,1):i.scalaY&&t.scale(1,i.scalaY)}i.paint(t),t.restore(),this.stage.mode=="edit"&&i.editable==1&&i.selected==1&&this.paintControlPoints(i)}},this.getElementControlRects=function(e){var t=this.stage.controlRect.width,n=this.stage.controlRect.height,r=e.width*e.scalaX,i=e.height*e.scalaY,s={};s.top_left={x:-r/2-t,y:-i/2-n},s.top_center={x:-(t/2),y:-i/2-n},s.top_right={x:r/2,y:-i/2-n},s.middle_left={x:-r/2-t,y:-(n/2)},s.middle_right={x:r/2,y:-(n/2)},s.bottom_left={x:-r/2-t,y:i/2},s.bottom_center={x:-(t/2),y:i/2},s.bottom_right={x:r/2,y:i/2};for(var o in s){var u=s[o];u.position=o,u.width=this.stage.controlRect.width,u.height=this.stage.controlRect.height}return s},this.paintControlPoints=function(e){var t=this.graphics,n=this.stage.controlRect.width,r=this.stage.controlRect.height;t.save();if(e.translate){var i=e.scalaX||1,s=e.scalaY||1;t.translate(e.x+e.width*i/2,e.y+e.height*s/2)}t.strokeStyle="rgb(255,255,255)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0,t.beginPath();var o=this.getElementControlRects(e);for(var u in o){var a=o[u],f=a.x,l=a.y;t.rect(f,l,n,r)}t.stroke(),t.closePath(),t.restore()},this.paintOperations=function(e){for(var t=0;t<e.length;t++)e[t](this.graphics)},this.addOperation=function(e){return this.operations.push(e),this},this.clearOperations=function(){return this.operations=[],this};var r={};this.setBackground=function(e){if(typeof e=="string"){var t=r[e];t==null&&(t=new Image,t.src=e,r[e]=t),this.background=t}else this.background=e},this.paintBackgroud=function(e){this.graphics.save(),this.background?this.graphics.drawImage(e,-this.stage.translateX,-this.stage.translateY,this.width,this.height):(this.graphics.fillStyle="rgba("+this.style.fillStyle+","+this.alpha+")",this.graphics.fillRect(-this.stage.translateX,-this.stage.translateY,this.width,this.height)),this.graphics.restore()},this.paint=function(){if(!this.visible||!this.stage)return;var e=this.graphics;e.save(),this.shadow&&(this.graphics.shadowBlur=5,this.graphics.shadowColor="rgba(0,0,0,0.5)",this.graphics.shadowOffsetX=3,this.graphics.shadowOffsetY=6),this.paintBackgroud(this.background),this.paintElements(this.elements),this.paintOperations(this.operations),e.restore()},this.repaint=function(){this.paint()},this.add=function(e){e.id||(e.id="id_"+(new Date).getTime()+this.elements.length),this.elementMap[e.id]||(this.elementMap[e.id]=e,this.elements.push(e))},this.remove=function(e){this.removeFromArray("elements",e)},this.removeFromArray=function(e,t){var n=typeof t=="string"?t:t.id;if(t.id==null)return;this.elementMap[n]&&delete this.elementMap[n];for(var r=0;r<this[e].length;r++){var i=this[e][r];if(i.id===n)return this[e]=this[e].del(r),i}return null},this.getelementByXY=function(e,t){var n=null;for(var r=this.elements.length-1;r>=0;r--){var i=this.elements[r];i.isInPath&&i.isInPath({x:e,y:t})==1&&(n=i);if(i.translate){if(e>i.x&&e<i.x+i.width*i.scalaX&&t>i.y&&t<i.y+i.height*i.scalaY){n=i;break}}else if(e>i.x&&e<i.x+i.width&&t>i.y&&t<i.y+i.height){n=i;break}}return n},this.toSceneEvent=function(t){return e.util.clone(t)},this.mousedownHander=function(e){var t=this.toSceneEvent(e);this.dispatchEvent("_mousedown",t)},this.clickHander=function(e){var t=this.toSceneEvent(e);this.dispatchEvent("_click",t)},this.dbclickHander=function(e){this.isOnDbclick=!0;var t=e.x,n=e.y;this.dbclickX=t,this.dbclickY=n;var r=this.toSceneEvent(e);this.dispatchEvent("_dbclick",r)},this.mousemoveHander=function(e){var t=this.toSceneEvent(e),n=t.x,r=t.y;this.stage.isOnMouseDown?(t.dx=n-this.stage.mouseDownX,t.dy=r-this.stage.mouseDownY,this.dispatchEvent("_mousedrag",t)):this.dispatchEvent("_mousemove",t)},this.mouseupHander=function(e){var t=e.x,n=e.y,r=this.toSceneEvent(e);this.dispatchEvent("_mouseup",r)},this.keydownHander=function(e){this.dispatchEvent("_keydown",e)},this.keyupHander=function(e){this.dispatchEvent("_keyup",e)},this.addEventListener=function(e,t){return this.messageBus.subscribe(e,t),this},this.dispatchEvent=function(e,t){return this.messageBus.publish(e,t),this}}function n(t){var r=this;this.initialize=function(e){n.prototype.initialize.apply(this,arguments),this.nodes=[],this.links=[],this.containers=[],this.selectedElements=[]},t&&this.initialize(t),this.add=function(t){n.prototype.add.call(this,t),t instanceof e.Node?this.nodes.push(t):t instanceof e.Link?this.links.push(t):t instanceof e.Container&&this.containers.push(t)},this.remove=function(e){n.prototype.remove.call(this,e),this.removeFromArray("nodes",e),this.removeFromArray("links",e),this.removeFromArray("containers",e)},this.clear=function(){n.prototype.clear.call(this),this.nodes=[],this.links=[],this.container=[]};var i=n.prototype.paintElements;this.paintElements=function(){i.call(this,this.containers),i.call(this,this.links),i.call(this,this.nodes)},this.pushSelected=function(e){e.onSelected(),this.selectedElements.push(e)},this.cancleAllSelected=function(){for(var e=0;e<this.selectedElements.length;e++)this.selectedElements[e].cancleSelected();this.selectedElements=[]},this.notInSelectedNodes=function(e){for(var t=0;t<this.selectedElements.length;t++)if(e===this.selectedElements[t])return!1;return!0},this.updateSelectedNodes=function(){for(var e=0;e<this.selectedElements.length;e++){var t=this.selectedElements[e];t.onSelected()}return!0},this.addEventListener("_mousedown",function(t){var n=e.util.clone(t),i=n.x,s=n.y,o=r.getelementByXY(i,s);if(o)o.onMousedown(n),n.target=o,r.notInSelectedNodes(o)?t.ctrlKey||r.cancleAllSelected():o!=r.currentelement&&r.updateSelectedNodes(i,s),r.pushSelected(o);else{var u=null;r.stage.mode=="edit"&&(r.currentControlRect=r.getControlRectByXY(i,s));if(r.currentControlRect!=null){var a=r.currentControlRect.element;a.selectedWidth=a.width,a.selectedHeight=a.height,a.resizeLocation={x:a.x,y:a.y}}else t.ctrlKey||r.cancleAllSelected()}r.dispatchEvent("mousedown",n),r.currentelement=o}),this.addEventListener("_click",function(t){var n=e.util.clone(t),i=r.getelementByXY(t.x,t.y);i&&i.onClick(n),r.dispatchEvent("click",n)}),this.addEventListener("_dbclick",function(t){var n=e.util.clone(t),i=n.x,s=n.y,o=r.getelementByXY(i,s);o?(o.onDbclick(n),n.target=o,r.dispatchEvent("dbclick",n)):(r.cancleAllSelected(),r.dispatchEvent("dbclick",n)),r.currentelement=o}),this.addEventListener("_mousedrag",function(t){var n=t.x,i=t.y,s=t.dx,o=t.dy;if(r.currentelement&&r.currentelement.dragable){var u=e.util.clone(t);u.dx=s,u.dy=o,u.target=r.currentelement;for(var a=0;a<r.selectedElements.length;a++){var f=r.selectedElements[a];if(f===r.currentelement)continue;var l=f.selectedLocation.x+s,c=f.selectedLocation.y+o;f.setLocation(l,c)}r.currentelement.onMousedrag(u),r.dispatchEvent("mousedrag",u)}else if(r.stage.mode=="edit"){var h=r.currentControlRect;h!=null&&h.element.resizeAble&&r.elementResizeHandle(h,s,o)}else r.areaSelectHandle(t)}),this.areaSelectHandle=function(e){var t=e.x,n=e.y,i=t>=r.stage.mouseDownX?r.stage.mouseDownX:t,s=n>=r.stage.mouseDownY?r.stage.mouseDownY:n,o=Math.abs(t-r.stage.mouseDownX),u=Math.abs(n-r.stage.mouseDownY);r.clearOperations().addOperation(function(e){e.beginPath(),e.strokeStyle="rgba(0,0,236,0.5)",e.fillStyle="rgba(0,0,236,0.1)",e.rect(i,s,o,u),e.fill(),e.stroke(),e.closePath()});for(var a=0;a<r.elements.length;a++){var f=r.elements[a];f.x>i&&f.x+f.width<i+o?f.y>s&&f.y+f.height<s+u&&r.pushSelected(f):e.ctrlKey||f.cancleSelected()}},this.addEventListener("_mousemove",function(t){var n=t.x,i=t.y,s=r.getelementByXY(n,i);if(s){r.mouseOverelement&&r.mouseOverelement!==s&&r.mouseOverelement.onMouseout(t),r.mouseOverelement=s;if(!s.isOnMousOver){var o=e.util.clone(t);o.target=s,s.onMouseover(o),r.dispatchEvent("mouseover",o)}}else if(r.mouseOverelement){var o=e.util.clone(t);o.target=s,r.mouseOverelement.onMouseout(o),r.dispatchEvent("mouseout",o),r.mouseOverelement=null}var u=r.getControlRectByXY(n,i);u!=null&&u.element.resizeAble&&r.setCusorByControlRectPosition(u.position)}),this.elementResizeHandle=function(e,t,n){var r=e.element,i=e.position;i=="top_left"?(r.width>1&&r.height>1&&(r.x=r.resizeLocation.x+t,r.y=r.resizeLocation.y+n),n=-n,t=-t):i=="top_center"?(r.height>1&&(r.y=r.resizeLocation.y+n),n=-n,t=0):i=="top_right"?(r.width>1&&r.height>1&&(r.y=r.resizeLocation.y+n),n=-n):i=="bottom_left"?(r.width>1&&(r.x=r.resizeLocation.x+t),t=-t):i=="middle_left"?(r.width>1&&(r.x=r.resizeLocation.x+t),t=-t,n=0):i=="bottom_center"?t=0:i=="middle_right"&&(n=0);var s=r.selectedWidth+t,o=r.selectedHeight+n;s<=0&&(s=1),o<=0&&(o=1),r.width=s,r.height=o};var s={top_left:"nw-resize",top_center:"n-resize",top_right:"ne-resize",middle_left:"e-resize",middle_right:"e-resize",bottom_left:"ne-resize",bottom_center:"n-resize",bottom_right:"nw-resize"};return this.setCusorByControlRectPosition=function(e){var t=s[e];t!=null&&(this.stage.canvas.style.cursor=t)},this.getControlRectByXY=function(t,n){if(this.selectedElements.length>0)for(var r=0;r<this.selectedElements.length;r++){var i=this.selectedElements[r],s=this.getElementControlRects(i);for(var o in s){var u=s[o];u.element=i;var a={x:i.x+i.width*i.scalaX/2,y:i.y+i.height*i.scalaY/2},f={x:a.x+u.x,y:a.y+u.y,width:u.width,height:u.height};if(e.util.isPointInRect({x:t,y:n},f))return u}}return null},this.addEventListener("_mouseup",function(t){var n=t.x,i=t.y,s=r.currentelement;r.clearOperations();var o=e.util.clone(t);r.currentelement?(r.currentelement.onMouseup(o),o.target=r.currentelement,r.dispatchEvent("mouseup",o)):r.dispatchEvent("mouseup",o),s&&s.layout&&s.layout.auto==1&&r.layoutNode(s)}),this.isAllEndpoint=function(e){for(var t=0;t<e.length;t++){var n=this.getChilds(e[t]);if(n.length>0)return!1}return!0},this.getChilds=function(e){var t=[];for(var n=0;n<this.links.length;n++)this.links[n].nodeA===e&&t.push(this.links[n].nodeZ);return t},this.layoutNode=function(t){var n=this.getChilds(t);if(n.length==0)return null;e.Layout.adjustPosition(t,n);if(this.isAllEndpoint(n))return null;for(var r=0;r<n.length;r++)this.layoutNode(n[r]);return null},r}e.AbstractScene=t,n.prototype=new e.AbstractScene,e.Scene=n}(JTopo),function(e){function t(){this.initialize=function(){this.shadow=!0},this.getLocation=function(e,t){return{x:this.x,y:this.y}},this.setLocation=function(e,t){return this.x=e,this.y=t,this},this.setCenterLocation=function(e,t){return this.x=e-this.width/2,this.y=t-this.height/2,this},this.getCenterLocation=this.getCenterXY=function(){return{x:this.x+this.width/2,y:this.y+this.height/2}},this.getSize=function(){return{width:this.width,height:this.heith}},this.setSize=function(e,t){return this.width=e,this.height=t,this},this.setBound=function(e,t,n,r){return this.setLocation(e,t),this.setSize(n,r),this},this.getBound=function(){return{left:this.x,top:this.y,right:this.x+this.width,bottom:this.y+this.height}},this.getDisplaySize=function(){return{width:this.width*this.scalaX,height:this.height*this.scalaY}},this.onSelected=function(){this.selected=!0,this.selectedLocation={x:this.x,y:this.y}},this.cancleSelected=function(){this.selected=!1,this.selectedLocation=null},this.onDbclick=function(e){this.onDbclickX=e.x,this.onDbclickY=e.y,e.target=this,this.dispatchEvent("dbclick",e)},this.onClick=function(e){this.clickX=e.x,this.clickY=e.y,this.onSelected(),e.target=this,this.dispatchEvent("click",e)},this.onMousedown=function(e){this.mousedownX=e.x,this.mousedownY=e.y,this.onSelected(),e.target=this,this.dispatchEvent("mousedown",e)},this.onMouseup=function(e){this.mouseupX=e.x,this.mouseupY=e.y,this.isOnMousedrag=!1,e.target=this,this.dispatchEvent("mouseup",e)},this.onMouseover=function(e){this.isOnMousOver=!0,this.dispatchEvent("mouseover",e)},this.onMouseout=function(e){this.isOnMousOver=!1,e.target=this,this.dispatchEvent("mouseout",e)},this.onMousedrag=function(e){this.isOnMousedrag=!0;var t=e.dx,n=e.dy,r=this.selectedLocation.x+t,i=this.selectedLocation.y+n;this.setLocation(r,i),e.target=this,this.dispatchEvent("mousedrag",e)},this.paint=function(e){e.beginPath(),e.fillStyle="rgba("+this.style.fillStyle+","+this.alpha+")",e.rect(-this.width/2,-this.height/2,this.width,this.height),e.fill(),e.closePath()},this.addEventListener=function(t,n){return this.messageBus||(this.messageBus=new e.util.MessageBus),this.messageBus.subscribe(t,n),this},this.dispatchEvent=function(e,t){return this.messageBus?(this.messageBus.publish(e,t),this):null}}function n(){this.initialize=function(){n.prototype.initialize.apply(this,arguments),this.x=0,this.y=0,this.width=32,this.height=32,this.visible=!0,this.translate=!0,this.alpha=1,this.rotate=0,this.scalaX=1,this.scalaY=1,this.style={fillStyle:"22,119,238"},this.editable=!0,this.resizeAble=!0},this.initialize(arguments)}function r(e,t){this.initialize(),this.style.background="auto-size";var n=r.imageChace;n==null&&(n=r.imageChace={}),this.setImage=function(e,t){var r=this;if(typeof e=="string"){var i=n[e];i==null?(i=new Image,i.src=e,t&&(i.onload=function(){n[e]=i,r.setSize(i.width,i.height)})):t&&this.setSize(i.width,i.height),this.image=i}else this.image=e,t&&e&&e.width&&e.height&&this.setSize(e.width,e.height)},e&&this.setImage(e,t),this.paint=function(e){if(!this.image)return;e.save(),e.beginPath(),e.fillStyle="rgba("+this.style.fillStyle+","+this.alpha+")",this.paintImage(e),e.fill(),e.closePath(),e.restore()},this.paintImage=function(e){e.drawImage(this.image,-this.width/2,-this.height/2,this.width,this.height)}}function i(e){this.initialize(),this.paint=e}n.prototype=new t,r.prototype=new n,i.prototype=new n,e.AbstractElement=t,e.Element=n,e.ImageElement=r,e.CustomElement=i}(JTopo),function(e){function t(e){this.initialize=function(e){t.prototype.initialize.apply(this,arguments),this.style.fontColor="255,255,255",this.style.fontSize="10pt",this.style.font="Consolas",this.name=e,this.dragable=!0,this.selectable=!0,this.selected=!1,this.label={position:"Bottom_Center"}},this.initialize(e),this.paint=function(e){(this.selected||this.isOnMousOver)&&this.drawSelectedRect(e),this.image?t.prototype.paint.call(this,e):(e.beginPath(),e.fillStyle="rgba("+this.style.fillStyle+","+this.alpha+")",e.rect(-this.width/2,-this.height/2,this.width,this.height),e.fill(),e.closePath()),this.drawText(e)},this.drawSelectedRect=function(e){if(!this.selectable)return;var t=this.name,n=t?e.measureText(t).width:0,r=t?16:6,i=Math.max(this.width,n);e.save(),e.beginPath(),e.strokeStyle="rgba(168,202,255, 0.9)",e.fillStyle="rgba(168,202,236,0.7)",e.rect(-i/2-3,-this.height/2-3,i+6,this.height+r),e.fill(),e.stroke(),e.closePath(),e.restore()},this.drawText=function(e){var t=this.name;if(!t||t=="")return;var n=e.measureText(t).width;e.beginPath(),e.font=this.style.fontSize+" "+this.style.font,e.fillStyle="rgba("+this.style.fontColor+", "+this.alpha+")";var r=this.getTextPostion(this.label.position,n);e.fillText(t,r.x,r.y),e.closePath()},this.getTextPostion=function(e,t){var n={Top_Center:function(){return{x:-this.width/2+(this.width-t)/2,y:-this.height/2}},Top_Right:function(){return{x:this.width/2,y:-this.height/2}},Top_Left:function(){return{x:-this.width/2-t,y:-this.height/2}},Bottom_Center:function(){return{x:-this.width/2+(this.width-t)/2,y:this.height/2+12}},Bottom_Right:function(){return{x:this.width/2,y:this.height/2+12}},Bottom_Left:function(){return{x:-this.width/2-t,y:this.height/2+12}},Middle_Center:function(){return{x:-this.width/2+(this.width-t)/2,y:0}},Middle_Right:function(){return{x:this.width/2,y:0}},Middle_Left:function(){return{x:-this.width/2-t,y:0}}},r=n[e];r==null&&(r=n.Bottom_Center);var i=r.call(this);return this.label.offsetX&&typeof this.label.offsetX=="number"&&(i.x+=this.label.offsetX),this.label.offsetY&&typeof this.label.offsetY=="number"&&(i.y+=this.label.offsetY),i}}function n(e){this.initialize(),this.height=14,this.name=e,this.paint=function(e){var t=e.measureText(this.name).width;this.width=t,e.beginPath(),e.font=this.style.fontSize+" "+this.style.font,e.strokeStyle="rgba("+this.style.fontColor+", "+this.alpha+")",e.strokeText(this.name,-this.width/2,-this.height/2+12),e.closePath()}}function r(e){this.initialize(),this.setSize(100,100),this.name=e,this.translate=!1,this.paint=function(e){if(!this.visible)return;var t=this.x,n=this.y;e.beginPath(),e.strokeStyle="rgba(230, 230, 230, 0.8)",e.moveTo(t+50,n),e.quadraticCurveTo(t,n,t,n+37.5),e.quadraticCurveTo(t,n+75,t+25,n+75),e.quadraticCurveTo(t+25,n+95,t+5,n+100),e.quadraticCurveTo(t+35,n+95,t+45,n+75),e.quadraticCurveTo(t+100,n+75,t+100,n+37.5),e.quadraticCurveTo(t+100,n,t+50,n),e.strokeText(this.name,this.x+20,this.y+20),e.stroke(),e.closePath()}}function i(){this.initialize(),this.setSize(120,120),this.translate=!1,this.paint=function(e){if(!this.visible)return;e.save(),e.beginPath(),e.fillStyle="rgba("+this.style.fillStyle+","+this.alpha+")",e.moveTo(this.x+75,this.y+40),e.bezierCurveTo(this.x+75,this.y+37,this.x+70,this.y+25,this.x+50,this.y+25),e.bezierCurveTo(this.x+20,this.y+25,this.x+20,this.y+62.5,this.x+20,this.y+62.5),e.bezierCurveTo(this.x+20,this.y+80,this.x+40,this.y+102,this.x+75,this.y+120),e.bezierCurveTo(this.x+110,this.y+102,this.x+130,this.y+80,this.x+130,this.y+62.5),e.bezierCurveTo(this.x+130,this.y+62.5,this.x+130,this.y+25,this.x+100,this.y+25),e.bezierCurveTo(this.x+85,this.y+25,this.x+75,this.y+37,this.x+75,this.y+40),e.fill(),e.closePath(),e.restore()}}function s(e){this.initialize(),this.style.fillStyle="71, 167, 184",this.className=e,this.rowHeight=18,this.width=268,this.classObj=null,this.translate=!1,this.operations=null,this.attributes=null,this.maxItem=10,this.paint=function(e){if(!this.visible)return;if(this.classObj!=null){this.operations=[],this.attributes=[];for(var t in this.classObj){if(i>this.maxItem)break;var n=this.classObj[t];if(typeof n=="function"){var r="(";for(var i=0;i<n.length;i++)r+="arg"+i,i+1<n.length&&(r+=", ");r+=")",t.length+r.length>35?(this.operations.push("+ "+t+r.substring(0,35-t.length)),this.operations.push("  "+r.substring(35-t.length))):this.operations.push("+ "+t+r)}else this.attributes.push("- "+t+": "+typeof n)}}if(this.operations==null||this.operations.length==0)this.operations=[" "];if(this.attributes==null||this.attributes.length==0)this.attributes=[" "];this.operations.length>this.maxItem&&(this.operations=this.operations.splice(0,this.maxItem),this.operations.push("  ...")),this.attributes.length>this.maxItem&&(this.attributes=this.attributes.splice(0,this.maxItem),this.attributes.push("  ...")),this.height=(this.operations.length+this.attributes.length+1)*this.rowHeight+3,e.save(),e.beginPath(),e.fillStyle="rgba(239,247,149,"+this.alpha+")",e.rect(this.x,this.y,this.width,this.height),e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fill(),e.font=this.style.fontSize+" "+this.style.font,e.moveTo(this.x,this.y+this.rowHeight+3),e.lineTo(this.x+this.width,this.y+this.rowHeight+3);var s=e.measureText(this.className).width;e.strokeText(this.className,this.x+(this.width-s)/2,this.y+this.rowHeight);for(var i=0;i<this.operations.length;i++){var o=this.operations[i];e.strokeText(o,this.x+5,this.y+this.rowHeight+this.rowHeight*(i+1))}e.moveTo(this.x,this.y+this.rowHeight*(this.operations.length+1)+3),e.lineTo(this.x+this.width,this.y+this.rowHeight*(this.operations.length+1)+3);var u=this.y+this.rowHeight*(this.operations.length+1);for(var i=0;i<this.attributes.length;i++){var a=this.attributes[i];e.strokeText(a,this.x+5,u+this.rowHeight*(i+1))}e.stroke(),e.closePath(),e.restore()}}function o(e){this.width=-1,this.height=-1,this.initialize(),this.radius=30,this.beginDegree=0,this.endDegree=2*Math.PI,this.name=e,this.paint=function(e){(this.selected||this.isOnMousOver)&&this.drawSelectedRect(e);if(this.visible==0)return;if(this.width==-1||this.height==-1){var t=this.radius*2,n=this.radius*2;this.width=t,this.height=n}var r=Math.min(this.width/2,this.height/2);e.save(),e.beginPath(),e.fillStyle="rgba("+this.style.fillStyle+","+this.alpha+")",e.arc(0,0,r,this.beginDegree,this.endDegree,!0),e.fill(),e.closePath(),e.restore(),this.drawText(e)}}function u(e,t,n){this.initialize(),this.frameImages=e||[],this.frameIndex=0,this.isStop=!0;var r=t||1e3;this.repeatPlay=!1;var i=this;this.nextFrame=function(){if(this.isStop)return;if(this.frameImages.length==null)return;this.frameIndex++;if(this.frameIndex>=this.frameImages.length){if(!this.repeatPlay)return;this.frameIndex=0}this.setImage(this.frameImages[this.frameIndex],n),setTimeout(function(){i.nextFrame()},r/e.length)}}function a(e,t,n,r,i){this.initialize();var s=this;this.setImage(e),this.frameIndex=0,this.isPause=!0,this.repeatPlay=!1;var o=r||1e3;i=i||0,this.paint=function(e){if(!this.image)return;var t=this.width,r=this.height;e.save(),e.beginPath(),e.fillStyle="rgba("+this.style.fillStyle+","+this.alpha+")";var s=(Math.floor(this.frameIndex/n)+i)*r,o=Math.floor(this.frameIndex%n)*t;e.drawImage(this.image,o,s,t,r,-t/2,-r/2,t,r),e.fill(),e.closePath(),e.restore()},this.nextFrame=function(){if(this.isStop)return;this.frameIndex++;if(this.frameIndex>=t*n){if(!this.repeatPlay)return;this.frameIndex=0}setTimeout(function(){if(s.isStop)return;s.nextFrame()},o/(t*n))}}function f(){var e=null;return arguments.length<=3?e=new u(arguments[0],arguments[1],arguments[2]):e=new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),e.stop=function(){e.isStop=!0},e.play=function(){e.isStop=!1,e.frameIndex=0,e.nextFrame()},e}t.prototype=new e.ImageElement,n.prototype=new t,r.prototype=new t,i.prototype=new t,s.prototype=new t,o.prototype=new t,u.prototype=new t,a.prototype=new t,f.prototype=new t,e.Node=t,e.TextNode=n,e.UMLClassNode=s,e.TipNode=r,e.HeartNode=i,e.CircleNode=o,e.AnimateNode=f}(JTopo),function(e){function t(t,n,r){this.initialize=function(e,t,n){if(arguments.length==0)return;this.name=n,this.nodeA=e,this.nodeZ=t,this.alpha=1,this.style={strokeStyle:"116, 166, 250",fillStyle:"116, 166, 250",lineWidth:2,fontSize:"12pt",fontColor:"255,255,0",lineJoin:"miter"},this.visible=!0},this.initialize(t,n,r),this.paint=function(e){if(!this.nodeA||!this.nodeZ)return;var r=this.nodeA;e.beginPath(),e.strokeStyle="rgba("+this.style.strokeStyle+","+this.alpha+")",e.lineWidth=this.style.lineWidth,t===n?e.arc(this.nodeA.x,this.nodeA.y,t.width/2,0,2*Math.PI):(e.moveTo(this.nodeA.x+this.nodeA.width/2,this.nodeA.y+this.nodeA.height/2),e.lineTo(this.nodeZ.x+this.nodeZ.width/2,this.nodeZ.y+this.nodeZ.height/2)),e.stroke(),e.closePath(),this.paintText(e)},this.paintText=function(e){if(this.name){var t=this.name;if(!t||t=="")return;var n=e.measureText(t).width;e.beginPath(),e.lineWidth=1,e.font=this.style.fontSize+" "+this.style.font,e.strokeStyle="rgba("+this.style.fontColor+", "+this.alpha+")",e.strokeText(t,this.nodeA.x+(this.nodeZ.x-this.nodeA.x)/2,this.nodeA.y+(this.nodeZ.y-this.nodeA.y)/2+12),e.stroke(),e.closePath()}},this.isInPath=function(t){var n=this.nodeA.getCenterXY(),r=this.nodeZ.getCenterXY();return e.util.isPointInLine(t,n,r)}}function n(e,t,r,i){this.initialize=function(){n.prototype.initialize.apply(this,arguments),this.fold=i||"x"},this.initialize(e,t,r,i),this.paint=function(e){if(!this.nodeA||!this.nodeZ)return;var t=this.nodeA.getCenterXY(),n=this.nodeZ.getCenterXY();e.save(),e.beginPath(),e.lineJoin=this.style.lineJoin,e.strokeStyle="rgba("+this.style.strokeStyle+","+this.alpha+")",e.lineWidth=this.style.lineWidth,e.moveTo(t.x,t.y),this.fold=="y"?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y),e.lineTo(n.x,n.y),e.stroke(),e.closePath(),e.restore()}}function r(e,t,n){this.initialize=function(){r.prototype.initialize.apply(this,arguments),this.arrowsSize=20,this.fillArrows=!1},this.initialize(e,t,n),this.paint=function(e){if(!this.nodeA||!this.nodeZ)return;e.beginPath(),e.strokeStyle="rgba("+this.style.strokeStyle+","+this.alpha+")",e.lineWidth=this.style.lineWidth,e.lineJoin=this.style.lineJoin;var t={x:this.nodeA.x+this.nodeA.width/2,y:this.nodeA.y+this.nodeA.height/2},n={x:this.nodeZ.x+this.nodeZ.width/2,y:this.nodeZ.y+this.nodeZ.height/2},r=Math.atan2(t.y-n.y,t.x-n.x);n.x=n.x+Math.cos(r)*this.nodeZ.width/2,n.y=n.y+Math.sin(r)*this.nodeZ.height/2;var i=.4,s={x:n.x+Math.cos(r-i)*this.arrowsSize,y:n.y+Math.sin(r-i)*this.arrowsSize},o={x:n.x+Math.cos(r+i)*this.arrowsSize,y:n.y+Math.sin(r+i)*this.arrowsSize};e.moveTo(this.nodeA.x+this.nodeA.width/2,this.nodeA.y+this.nodeA.height/2),e.lineTo(s.x+(o.x-s.x)/2,s.y+(o.y-s.y)/2),e.stroke(),e.closePath(),e.beginPath(),e.moveTo(s.x,s.y),e.lineTo(n.x,n.y),e.lineTo(o.x,o.y),e.lineTo(s.x,s.y),this.fillArrows==1&&(e.fillStyle="rgba("+this.style.fillStyle+","+this.alpha+")",e.fill()),e.stroke(),e.closePath()}}function i(e,t,n,r){this.initialize=function(){i.prototype.initialize.apply(this,arguments),this.arrowsSize=20,this.fillArrows=!1,this.fold=r||"x"},this.initialize(e,t,n,r),this.paint=function(e){if(!this.nodeA||!this.nodeZ)return;var t=this.nodeA.x,n=this.nodeA.y,r=this.nodeZ.x,i=this.nodeZ.y,s=t,o=n;if(t==r||n==i){e.beginPath(),e.strokeStyle="rgba("+this.style.strokeStyle+","+this.alpha+")",e.lineWidth=this.style.lineWidth,e.lineJoin=this.style.lineJoin;var u={x:this
.nodeA.x+this.nodeA.width/2,y:this.nodeA.y+this.nodeA.height/2},a={x:this.nodeZ.x+this.nodeZ.width/2,y:this.nodeZ.y+this.nodeZ.height/2},f=Math.atan2(u.y-a.y,u.x-a.x);a.x=a.x+Math.cos(f)*this.nodeZ.width/2,a.y=a.y+Math.sin(f)*this.nodeZ.height/2;var l=.4,c={x:a.x+Math.cos(f-l)*this.arrowsSize,y:a.y+Math.sin(f-l)*this.arrowsSize},h={x:a.x+Math.cos(f+l)*this.arrowsSize,y:a.y+Math.sin(f+l)*this.arrowsSize};e.lineTo(c.x+(h.x-c.x)/2,c.y+(h.y-c.y)/2),e.stroke(),e.closePath(),e.beginPath(),e.moveTo(c.x,c.y),e.lineTo(a.x,a.y),e.lineTo(h.x,h.y),e.lineTo(c.x,c.y),this.fillArrows==1&&(e.fillStyle="rgba("+this.style.fillStyle+","+this.alpha+")",e.fill()),e.closePath(),e.stroke()}else{this.fold=="x"?s=t+(r-t):o=n+(i-n),e.beginPath(),e.strokeStyle="rgba("+this.style.strokeStyle+","+this.alpha+")",e.lineWidth=this.style.lineWidth,e.lineJoin=this.style.lineJoin,e.moveTo(t+this.nodeA.width/2,n+this.nodeA.height/2),e.lineTo(s+this.nodeA.width/2,o+this.nodeA.height/2);var u={x:s+this.nodeA.width/2,y:o+this.nodeA.height/2},a={x:this.nodeZ.x+this.nodeZ.width/2,y:this.nodeZ.y+this.nodeZ.height/2},f=Math.atan2(u.y-a.y,u.x-a.x);a.x=a.x+Math.cos(f)*this.nodeZ.width/2,a.y=a.y+Math.sin(f)*this.nodeZ.height/2;var l=.4,c={x:a.x+Math.cos(f-l)*this.arrowsSize,y:a.y+Math.sin(f-l)*this.arrowsSize},h={x:a.x+Math.cos(f+l)*this.arrowsSize,y:a.y+Math.sin(f+l)*this.arrowsSize};e.lineTo(c.x+(h.x-c.x)/2,c.y+(h.y-c.y)/2),e.stroke(),e.closePath(),e.beginPath(),e.moveTo(c.x,c.y),e.lineTo(a.x,a.y),e.lineTo(h.x,h.y),e.lineTo(c.x,c.y),this.fillArrows==1&&(e.fillStyle="rgba("+this.style.fillStyle+","+this.alpha+")",e.fill()),e.stroke(),e.closePath()}}}function s(e,t,n){this.initialize=function(){i.prototype.initialize.apply(this,arguments),this.flexional={direction:"vertical",extend:function(){return 20}}},this.initialize(e,t,n);var r=this.paintText;this.paint=function(e){if(!this.nodeA||!this.nodeZ)return;var t=this.nodeA.x,n=this.nodeA.y,i=this.nodeZ.x,s=this.nodeZ.y;e.beginPath(),e.lineJoin=this.style.lineJoin,e.strokeStyle="rgba("+this.style.strokeStyle+","+this.alpha+")",e.lineWidth=this.style.lineWidth;if(t==i||n==s)e.moveTo(this.nodeA.x+this.nodeA.width/2,this.nodeA.y+this.nodeA.height/2),e.lineTo(this.nodeZ.x+this.nodeZ.width/2,this.nodeZ.y+this.nodeZ.height/2);else{var o=this.flexional.direction=="horizontal"?this.flexional.extend():0,u=this.flexional.direction=="vertical"?this.flexional.extend():0;o*=i-t>0?1:-1,u*=s-n>0?1:-1,e.moveTo(t+this.nodeA.width/2,n+this.nodeA.height/2),e.lineTo(t+this.nodeA.width/2+o,n+this.nodeA.height/2+u),e.lineTo(i+this.nodeA.width/2-o,s+this.nodeA.height/2-u),e.lineTo(i+this.nodeA.width/2,s+this.nodeA.height/2)}e.stroke(),e.closePath(),r.call(this,e)}}function o(e,t,n){this.initialize=function(){i.prototype.initialize.apply(this,arguments)},this.initialize(e,t,n),this.flexional.extend=function(){return this.flexional.direction=="horizontal"?Math.abs(t.x-e.x)/2:Math.abs(t.y-e.y)/2}}t.prototype=new e.AbstractElement,n.prototype=new t,r.prototype=new t,i.prototype=new t,s.prototype=new t,o.prototype=new s,e.Link=t,e.FoldLink=n,e.ArrowsLink=r,e.ArrowsFoldLink=i,e.FlexionalLink=s,e.OrthogonalLink=o}(JTopo),function(e){function t(n){this.initialize=function(e){t.prototype.initialize.apply(this,null),this.name=e,this.x=0,this.y=0,this.width=100,this.height=100,this.items=[],this.style={fillStyle:"255, 255, 255","padding-left":0,"padding-right":0,"padding-top":0,"padding-bottom":0},this.alpha=.6,this.dragable=!0,this.childDragble=null,this.visible=!0},this.initialize(n),this.add=function(e){this.items.push(e),e.parentContainer=this,this.updateBound(),this.childDragble&&(e.dragable=this.childDragble)},this.remove=function(e){for(var t=0;t<this.items.length;t++)if(this.items[t]===e){e.parentContainer=null,this.items=this.items.del(t),e.lastParentContainer=this;break}},this.clear=this.removeAll=function(){for(var e=0;e<this.items.length;e++)this.remove(this.items[e])},this.setLocation=function(e,t){var n=e-this.x,r=t-this.y;this.x=e,this.y=t;for(var i=0;i<this.items.length;i++){var s=this.items[i];s.setLocation(s.x+n,s.y+r)}},this.updateBound=function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];t.x<this.x&&(t.x=this.x),t.y<this.y&&(t.y=this.y),t.x+t.width>this.x+this.width&&(t.x=this.x+this.width-t.width),t.y+t.height>this.y+this.height&&(t.y=this.y+this.height-t.height)}},this.paint=function(t){this.layout&&e.Layout.adjustPosition(this,this.items),this.updateBound();if(!this.visible)return;t.beginPath(),t.shadowBlur=9,t.shadowColor="rgba(0,0,0,0.5)",t.shadowOffsetX=3,t.shadowOffsetY=3,t.fillStyle="rgba("+this.style.fillStyle+","+this.alpha+")",t.fillRect(this.x,this.y,this.width,this.height),t.closePath()}}function n(){this.initialize(arguments),this.updateBound=function(){var e={x:1e7,y:1e6,width:0,height:0};if(this.items.length>0){var t=1e7,n=-1e7,r=1e7,i=-1e7,s=n-t,o=i-r;for(var u=0;u<this.items.length;u++){var a=this.items[u];a.x<=t&&(t=a.x),a.x>=n&&(n=a.x),a.y<=r&&(r=a.y),a.y>=i&&(i=a.y),s=n-t+a.width,o=i-r+a.height}this.x=t,this.y=r,this.width=s,this.height=o}}}function r(){this.initialize(arguments),this.paint=function(e){if(this.items.length<2)return;var t=[];for(var n=0;n<this.items.length;n++){var r=this.items[n].getCenterXY();t.push(r)}for(var n=0;n<t.length-2;n+=3)e.beginPath(),e.moveTo(t[n].x,t[n].y),this.items[n+1].style.fillStyle="0,255,0",e.quadraticCurveTo(t[n+1].x,t[n+1].y,t[n+2].x,t[n+2].y),e.stroke(),e.closePath(),e.save(),e.beginPath(),e.lineWidth=1,e.strokeStyle="rgba(0,255,0,0.3)",e.moveTo(t[n].x,t[n].y),e.lineTo(t[n+1].x,t[n+1].y),e.stroke(),e.closePath(),e.restore()}}t.prototype=new e.AbstractElement,n.prototype=new t,r.prototype=new t,e.Container=t,e.AutoSizeContainer=n,e.EditContainer=r}(JTopo),function(e){function t(e,t,n,r,i,s){var o=i?i:0,u=s?s:2*Math.PI,a=u-o,f=a/n,l=[];o+=f/2;for(var c=o;c<=u;c+=f){var h=e+Math.cos(c)*r,p=t+Math.sin(c)*r;l.push({x:h,y:p})}return l}function n(e,t,n,r,i,s){var o=s||"bottom",u=[];if(o=="bottom"){var a=e-n/2*r+r/2;for(var f=0;f<=n;f++)u.push({x:a+f*r,y:t+i})}else if(o=="top"){var a=e-n/2*r+r/2;for(var f=0;f<=n;f++)u.push({x:a+f*r,y:t-i})}else if(o=="right"){var a=t-n/2*r+r/2;for(var f=0;f<=n;f++)u.push({x:e+i,y:a+f*r})}else if(o=="left"){var a=t-n/2*r+r/2;for(var f=0;f<=n;f++)u.push({x:e-i,y:a+f*r})}return u}function r(e,t,n,r,i,s){var o=s||"horizontal",u=[],a=Math.round(n/2),f=e+r;if(o=="horizontal"){for(var l=0;l<a;l++)u.push({x:f+l*r,y:t-i});for(var l=a;l<=n;l++)u.push({x:f+l*r,y:t+i})}else o=="vertical";return u}function i(e,t,n,r,i,s){var o=[];for(var u=0;u<n;u++)for(var a=0;a<r;a++)o.push({x:e+a*i,y:t+u*s});return o}function s(e,r){if(!e.layout)return;var s=e.layout,o=s.type,u=null,a=e.getCenterXY();if(o=="star")u=t(a.x,a.y,r.length,e.layout.radius,e.layout.beginDegree,e.layout.endDegree);else if(o=="tree")u=n(a.x,a.y,r.length,s.width,s.height,s.direction);else{if(o!="grid")return;u=i(e.x,e.y,s.rows,s.cols,s.horizontal||0,s.vertical||0)}for(var f=0;f<r.length;f++)r[f].setCenterLocation(u[f].x,u[f].y)}e.Layout={adjustPosition:s}}(JTopo),function(e){function t(){var t=new e.CircleNode;return t.radius=150,t.colors=["#3666B0","#2CA8E0","#77D1F6"],t.datas=[.3,.3,.4],t.translate=!1,t.paint=function(e){var n=t.radius*2,r=t.radius*2;t.width=n,t.height=n;var i=0;for(var s=0;s<this.datas.length;s++){var o=this.datas[s]*Math.PI*2;e.beginPath(),e.fillStyle=t.colors[s],e.moveTo(this.x+n/2,this.y+r/2),e.arc(this.x+n/2,this.y+r/2,this.radius/2,i,i+o,!1),e.fill(),e.closePath(),i+=o}},t}e.PieChartNode=t}(JTopo),function(e){function t(t,n){var r=null,i;return{stop:function(){return i?(window.clearInterval(i),r&&r.publish("stop"),this):this},start:function(){var e=this;return i=setInterval(function(){t.call(e)},n),this},onStop:function(t){return r==null&&(r=new e.util.MessageBus),r.subscribe("stop",t),this}}}function n(e,n){n=n||{};var r=n.gravity||.1,i=n.dx||0,s=n.dy||5,o=n.stop,u=n.interval||30,a=new t(function(){o&&o()?(s=.5,this.stop()):(s+=r,e.setLocation(e.x+i,e.y+s))},u);return a}function r(e,n,r,i,s){var o=50,u={};for(var a in n){var f=n[a],l=f-e[a];u[a]={oldValue:e[a],targetValue:f,step:l/r*o,isDone:function(t){var n=this.step>0&&e[t]>=this.targetValue||this.step<0&&e[t]<=this.targetValue;return n}}}var c=new t(function(){var t=!0;for(var r in n)u[r].isDone(r)||(e[r]+=u[r].step,t=!1);if(t){if(!i)return this.stop();for(var r in n)if(s){var o=u[r].targetValue;u[r].targetValue=u[r].oldValue,u[r].oldValue=o,u[r].step=-u[r].step}else e[r]=u[r].oldValue}},o);return c}function i(t,n){function s(n,i,s,o,u){var a=new e.Node;return a.setImage(t.image),a.setSize(t.width,t.height),a.style=r,a.setLocation(n,i),a.paint=function(e){e.save(),e.arc(0,0,s,o,u),e.clip(),e.beginPath(),this.image!=null?e.drawImage(this.image,-this.width/2,-this.height/2):(e.fillStyle="rgba("+this.style.fillStyle+","+this.alpha+")",e.rect(this.x,this.y,this.width,this.height),e.fill()),e.closePath(),e.restore()},a}var r=t.style,i=n.angle,o=i,u=i+Math.PI,a=s(t.x,t.y,t.width,o,u),f=s(t.x,t.y,t.width,o+Math.PI,o);return[a,f]}e.Animate={},e.Effect={},e.Animate.gravity=n,e.Animate.stepByStep=r,e.Effect.splitTwoPiece=i}(JTopo)